# تقرير شامل: منهجية وكيل الذكاء الاصطناعي "سند" ورحلة العميل

---

## 1. هوية الوكيل "سند" (سند - المستشار الاستراتيجي)

**سند** هو مستشار استراتيجي للتطوير المهني يعمل بمنهجية مختلفة عن روبوتات الدردشة التقليدية:

| السمة | الوصف |
|-------|-------|
| **الشخصية** | مستشار محترف، صريح، يتحدى التفكير التقليدي |
| **الفلسفة** | لا يردد كلام المستخدم، بل يرفع مستوى طموحه |
| **الأسلوب** | سؤال واحد في كل مرة، تحليل عميق، رؤى غير متوقعة |
| **اللغة** | عربي (RTL) مع دعم للإنجليزية |

---

## 2. محرك التوجيه الاستراتيجي OPA+ v2.0

المحرك يعتمد على إطار عمل متكامل يتضمن:

### بروتوكولات التحليل:
- **لا صدى للكلام (No Echoing):** لا يكرر ما قاله المستخدم، بل يضيف قيمة جديدة
- **تحليل الفجوة (Gap Analysis):** يحلل الفارق بين الواقع الحالي والطموح
- **فحص الواقعية (Reality Check):** يتحدى الأهداف غير الواقعية بلباقة
- **عامل البصيرة (Insight Factor):** يقدم استراتيجيات لم يفكر بها المستخدم
- **النماذج الذهنية:** قاعدة 80/20، استراتيجية المحيط الأزرق، إلخ

---

## 3. المراحل الست لرحلة العميل

```
[outcome] → [purpose] → [reality] → [options] → [decision] → [commitment]
   15%         30%         50%         65%         80%          100%
```

| المرحلة | الهدف | نسبة التقدم |
|---------|-------|-------------|
| **النتيجة (Outcome)** | ماذا تريد أن تحقق؟ | 0-15% |
| **الغرض (Purpose)** | لماذا هذا مهم لك؟ التحليل النفسي العميق | 15-30% |
| **الواقع (Reality)** | أين أنت الآن؟ المهارات، الخبرات، العوائق | 30-50% |
| **الخيارات (Options)** | ما المسارات المتاحة أمامك؟ | 50-65% |
| **القرار (Decision)** | أي مسار ستختار؟ مع تبرير | 65-80% |
| **الالتزام (Commitment)** | ما الخطوة الأولى التي ستتخذها؟ | 80-100% |

### تفاصيل كل مرحلة:

#### المرحلة 1: النتيجة (Outcome) - 0-15%
في هذه المرحلة، يركز سند على فهم الهدف النهائي للمستخدم. لا يكتفي بالإجابة السطحية، بل يحفر عميقاً لفهم الصورة الكاملة للنجاح كما يتخيلها المستخدم.

#### المرحلة 2: الغرض (Purpose) - 15-30%
هنا يدخل سند في التحليل النفسي العميق: لماذا هذا الهدف بالذات؟ ما الدافع الحقيقي وراءه؟ هل هو دافع داخلي حقيقي أم ضغط خارجي؟

#### المرحلة 3: الواقع (Reality) - 30-50%
يقيّم سند الوضع الحالي بشكل موضوعي: المهارات المتوفرة، الخبرات السابقة، العوائق الحقيقية، الموارد المتاحة.

#### المرحلة 4: الخيارات (Options) - 50-65%
يقدم سند ثلاثة مسارات مختلفة تناسب مستويات المخاطرة المختلفة، مع تحليل مزايا وعيوب كل مسار.

#### المرحلة 5: القرار (Decision) - 65-80%
يساعد سند المستخدم على اتخاذ قرار مدروس مع طلب تبرير واضح للاختيار.

#### المرحلة 6: الالتزام (Commitment) - 80-100%
يحوّل سند القرار إلى خطوة عملية محددة وقابلة للتنفيذ خلال فترة زمنية واضحة.

---

## 4. آليات ترقية التفكير

### كيف يعمل سند:

#### 4.1 استخلاص القوى الخفية
لا يكتفي سند بما يذكره المستخدم صراحةً، بل يستنتج نقاط قوة إضافية من سياق الحوار. مثلاً: إذا ذكر المستخدم أنه يدير فريقاً صغيراً، يستنتج سند قدرات القيادة والتنظيم.

#### 4.2 ثلاثة مسارات مهنية استراتيجية

| المسار | الوصف | مستوى المخاطرة |
|--------|-------|----------------|
| **المسار الآمن** | نمو تدريجي مع الحفاظ على الاستقرار | منخفض |
| **مسار النمو العدواني** | قفزات كبيرة مع تحديات أكبر | عالي |
| **مسار المحيط الأزرق** | فرص فريدة في مناطق أقل منافسة | متوسط-عالي |

#### 4.3 مقياس الموثوقية
نسبة من 0-100% تعكس جودة ووضوح المعلومات التي قدمها المستخدم. كلما كان المستخدم أكثر تفصيلاً وصدقاً، ارتفعت النسبة.

---

## 5. تدفق المحادثة والإنهاء التلقائي

### 5.1 البنية التقنية للتفاعل

```
المستخدم يكتب رسالة
        ↓
الخادم يستقبل الرسالة
        ↓
يُرسل إلى Gemini AI مع System Prompt
        ↓
Gemini يُرجع رد + METADATA
        ↓
[METADATA: {"stage": "reality", "progress": 45, "completed": false}]
        ↓
الواجهة تُحدّث شريط التقدم وتعرض الرد
```

### 5.2 بنية الـ METADATA
```json
{
  "stage": "purpose",
  "completed": false,
  "progress": 25
}
```

في مرحلة القرار، يُضاف decision_data:
```json
{
  "stage": "decision",
  "completed": false,
  "progress": 75,
  "decision_data": {
    "chosen_path": "growth",
    "reasoning": "..."
  }
}
```

### 5.3 شروط الإنهاء التلقائي
ينتهي الحوار تلقائياً عندما:
1. يصل المستخدم لمرحلة **الالتزام (Commitment)**
2. يكتب التزاماً واضحاً بخطوة عملية محددة
3. يُنتج الذكاء الاصطناعي JSON نهائي بـ `"status": "complete"`

---

## 6. التقرير النهائي وتصدير PDF

### 6.1 محتوى التقرير النهائي

| العنصر | الوصف |
|--------|-------|
| **نقاط القوة** | قوى ظاهرة ذكرها المستخدم + قوى خفية مستنتجة من الحوار |
| **تحليل الشغف** | فهم عميق لـ "لماذا" يريد المستخدم هذا المسار |
| **المسارات المهنية الثلاثة** | آمن، نمو عدواني، محيط أزرق |
| **مقياس الموثوقية** | نسبة مئوية تعكس جودة البيانات المُدخلة |
| **النصيحة الاستراتيجية** | جسر عملي بين الواقع الحالي والهدف المنشود |

### 6.2 بنية JSON النهائية
```json
{
  "status": "complete",
  "strengths": [
    "القوة الخفية المستنتجة",
    "القوة الظاهرة المذكورة"
  ],
  "passion": "تحليل نفسي عميق لدافع المستخدم",
  "career_paths": [
    "المسار 1: الطريق الآمن (مخاطر منخفضة)",
    "المسار 2: طريق النمو العدواني (مكافآت عالية)",
    "المسار 3: المحيط الأزرق (فرصة فريدة)"
  ],
  "reliability_score": 85,
  "advice": "نصيحة استراتيجية تربط الواقع بالحلم"
}
```

### 6.3 تصدير PDF
- **التقنية:** Remote Headless Chrome مع Puppeteer
- **الخطوط:** Cairo العربية لدعم RTL الكامل
- **التنسيق:** A4 احترافي
- **المحتوى الإضافي:** موارد تعليمية موثقة (بدون روابط مباشرة - Strategy 3)

---

## 7. الموارد الموثقة (Verified Resources)

### استراتيجية العرض (Strategy 3)
بدلاً من تقديم روابط مباشرة قد تتغير أو تنتهي صلاحيتها، يعرض سند:
- اسم المورد أو المجتمع المهني
- وصف موجز لفائدته
- كيفية الوصول إليه (مثلاً: "ابحث في LinkedIn عن...")

### أنواع الموارد
- منصات تعليمية معتمدة
- مجتمعات مهنية
- شهادات ودورات موصى بها
- كتب ومراجع

---

## 8. الخلاصة

**سند** ليس مجرد روبوت دردشة - إنه شريك استراتيجي يساعد المستخدم على:

1. اكتشاف ما لا يعرفه عن نفسه (القوى الخفية)
2. تحدي افتراضاته المحدودة (فحص الواقعية)
3. رؤية مسارات لم يفكر بها (الخيارات الثلاثة)
4. الخروج بخطة عمل واضحة وقابلة للتنفيذ (الالتزام)

---

## المراجع التقنية

- `server/routes.ts` - System Prompt والـ API endpoints
- `client/src/components/conversation.tsx` - واجهة المحادثة
- `client/src/components/results-display.tsx` - عرض النتائج
- `shared/schema.ts` - نموذج البيانات
- `server/pdf.service.ts` - خدمة تصدير PDF

---

*آخر تحديث: ديسمبر 2024*
*الإصدار: v2.0 - Strategic Direction Engine*
