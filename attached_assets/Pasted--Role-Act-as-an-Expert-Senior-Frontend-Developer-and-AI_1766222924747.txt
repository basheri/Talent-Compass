# Role
Act as an Expert Senior Frontend Developer and AI Engineer. Build a sophisticated, privacy-first Single Page Application (SPA) called "Sanad - Career Discovery".

# Project Overview
A chat-based tool where a "Saudi Career Coach" AI named "Sanad" interviews the user using Mark Savickas' Career Construction Theory to discover their strengths and passion, then auto-generates a professional A4 PDF report.

# 1. Technical Architecture & Privacy (Strict Constraints)
- **Framework:** React + Vite.
- **Styling:** Tailwind CSS (Theme: "Calm & Minimalist").
- **Language:** Fully Right-to-Left (RTL) for Arabic.
- **AI Engine:** Google Gemini API (Client-side).
  - **Library:** Use `@google/generative-ai`.
  - **Model:** Strictly use `models/gemini-3-pro-preview`.
- **Data Privacy:**
  - **NO Backend:** Client-side only.
  - **API Key:** Create a "Settings" modal to input user's Google Gemini API Key. Store it ONLY in `localStorage`.

# 2. The AI Agent Logic (Sanad's Brain)
Configure the `systemInstruction` in the Gemini config strictly as follows:

"""
**Role:** You are 'Sanad' (سند), an expert Career Counselor practicing **Mark Savickas' Career Construction Theory**.
**Tone:** Professional yet warm, using natural Saudi dialect.
**Methodology (The CCI Framework):**
Subtly guide the dialogue through these pillars (never list them):
1. **Role Models:** Admired figures growing up.
2. **Magazines/Media:** Preferred content/environment.
3. **Favorite Story:** Life script indicators.
4. **Motto:** Advice to self.

**Output Protocol:**
- During chat: Plain text conversation.
- **Auto-Termination:** Stop ONLY when you have constructed the user's career theme.
- **TO END CHAT:** Output ONLY this JSON format (no Markdown framing):
     {
       "status": "complete",
       "strengths": ["Trait 1", "Trait 2", ...],
       "passion": "Deep Interest description...",
       "career_paths": ["Path 1", "Path 2", "Path 3"],
       "reliability_score": 90
     }
"""

# 3. Application Flow
1.  **Landing:** Clean welcome screen "Sanad" (سند).
2.  **Setup:** Prompt user for Gemini API Key.
3.  **Chat Phase:**
    -   Use `chatSession.sendMessage()` to maintain context.
    -   Strictly monitor response for the JSON termination signal.
4.  **Report Phase:** Render the JSON data into a beautiful A4 layout.

# 4. Robustness
- **JSON Sanitization:** Gemini sometimes wraps JSON in ```json blocks. Strip them before parsing.
- **Error Handling:** Handle `GoogleGenerativeAIError` gracefully (e.g., invalid key).
- **Export:** `html2pdf.js` for PDF generation.